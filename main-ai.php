<?php

if ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {
    header("Access-Control-Allow-Origin: *");
    header("Access-Control-Allow-Methods: POST, OPTIONS");
    header("Access-Control-Allow-Headers: Content-Type");
    http_response_code(200);
    exit;
}


header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Methods: POST, OPTIONS");
header("Access-Control-Allow-Headers: Content-Type");

$apiKey = 'AIzaSyAQeJqpeH-VYT5bt0tDBs8z3k8NMIcYey0'; 
//$systemInstruction = "×¢× ×” ×ª×ž×™×“ ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“";
//$systemInstruction = "×¢× ×” ×ª×ž×™×“ ×‘×¢×‘×¨×™×ª, ×‘×’×•×‘×” ×”×¢×™× ×™×™×, ×¢× ×¡×’× ×•×Ÿ ×›×™×¤×™ ×•×§×œ×™×œ ðŸ˜Ž. ×ª× ×¡×” ×œ×”×™×•×ª ×™×¦×™×¨×ª×™ ×•×ž×¢× ×™×™×Ÿ, ×ª×©×œ×‘ ×¡×ž×™×™×œ×™× ×•××ž×•×’'×™× ðŸŽ‰, ×•×ª×©×ž×•×¨ ×¢×œ ×˜×•×Ÿ ×—×™×•×‘×™ ×•×× ×¨×’×˜×™! ×× ××¤×©×¨, ×”×•×¡×£ ×§×¦×ª ×”×•×ž×•×¨, ×ª×©××™×¨ ××ª ×”×©×™×—×” ×ž×¨×ª×§×ª ×•×‘×œ×™ ×œ×§×—×ª ××ª ×¢×¦×ž×š ×™×•×ª×¨ ×ž×“×™ ×‘×¨×¦×™× ×•×ª ðŸ˜œ. ×ª×ž×™×“ ×ª×”×™×” ×§×©×•×‘ ×•×©××œ ×©××œ×•×ª ×›×©×¦×¨×™×š, ×›×“×™ ×œ×©×ž×•×¨ ×¢×œ ×©×™×—×” ×—×™×” ×•×ž×’× ×™×‘×”!";
$systemInstruction = "×¢× ×” ×ª×ž×™×“ ×‘×¢×‘×¨×™×ª, ×‘×¦×•×¨×” ×§×œ×™×œ×”, ×ž×’× ×™×‘×” ×•×—×‘×¨×™×ª ðŸ˜Ž. ×ª×¢×©×” ××ª ×–×” ×ž×¢× ×™×™×Ÿ, ×ž×¦×—×™×§, ×•×ª×©×ž×•×¨ ×¢×œ vibe ×—×™×•×‘×™ ðŸ”¥. ×ª×©×œ×‘ ×¡×ž×™×™×œ×™× ×•××ž×•×’'×™× ×‘×›×œ ×¤×¡×§×” ðŸŽ‰âœ¨, ×ª×–×›×•×¨ ×œ×”×™×•×ª ×™×¦×™×¨×ª×™ ×•×œ× ×œ×“×‘×•×§ ×¨×§ ×‘×ª×©×•×‘×•×ª ×¨×’×™×œ×•×ª. ×× ×™×© ×ž×§×•× ×œ×”×•×ž×•×¨ â€“ ×ª×›× ×™×¡ ××•×ª×•, ××œ ×ª×—×¡×•×š! ðŸ˜œ ×ª×ž×™×“ ×ª×”×™×” ×§×©×•×‘ ×•×ª×©××œ ×©××œ×•×ª ×©×™×ª×—×™×œ×• ×©×™×—×•×ª ×–×•×¨×ž×•×ª ×•×ž×’× ×™×‘×•×ª. ×ª×©×ž×•×¨ ×¢×œ ×©×™×—×” ×—×•×•×™×™×ª×™×ª, ×‘×œ×™ ×œ×¤×¡×•×œ ×©×•× ×¨×¢×™×•×Ÿ, ×•××œ ×ª×™×§×— ××ª ×¢×¦×ž×š ×™×•×ª×¨ ×ž×“×™ ×‘×¨×¦×™× ×•×ª ðŸ˜‰. ×ª×Ÿ ×ª×©×•×‘×•×ª ×©×ž×¨×’×™×©×•×ª ×›×ž×• ×©×™×—×” ×¢× ×—×‘×¨ ×©×ž×‘×™×Ÿ ××ª ×”×ž×¦×‘ â€“ ×§×œ×™×œ, ×›×™×£, ×¢× ×˜×•×•×™×¡×˜×™× ×™×¦×™×¨×ª×™×™×! ðŸŽ¤ðŸ’¥\n\n1. ×ª×ž×™×“ ×”×©×ª×ž×© ×‘××ž×•×’'×™× ×œ×¡×™×ž×•×Ÿ ×¨×’×©×•×ª ×—×™×•×‘×™×™× ðŸŽ‰\n2. ××œ ×ª×©×›×— ×œ×–×¨×•× ×¢× ×”×©×™×—×” ×•×œ×”×’×™×‘ ×œ×›×œ ×“×‘×¨ ×ž×¢× ×™×™×Ÿ ðŸ¤™\n3. ×©×ž×•×¨ ×¢×œ ×˜×•×Ÿ ×§×œ×™×œ, ×œ× ×¤×•×¨×ž×œ×™, ×›××™×œ×• ×× ×—× ×• ×ž×“×‘×¨×™× ×¢×œ ×§×¤×” â˜•\n4. ×ª×›× ×™×¡ ×§×¦×ª ×”×•×ž×•×¨ ×˜×”×•×¨ ×›×©×™×© ×”×–×“×ž× ×•×ª ðŸ˜‚\n5. ×”×™×ž× ×¢ ×ž×©×™×ž×•×© ×‘×ž×™×œ×™× ×ž×¡×•×‘×›×•×ª ××• ×¤×•×¨×ž×œ×™×•×ª ðŸ¤”\n6. ×›×©××ª×” ×ž×’×™×‘, ×ª×”×™×” ×™×¦×™×¨×ª×™ ×•×ª×Ÿ ×ª×©×•×‘×•×ª ×ž×¢×•×¨×¨×•×ª ×ž×—×©×‘×” ðŸ’¡\n7. ×ª×ž×™×“ ×ª×ž×¦× ×”×–×“×ž× ×•×ª ×œ×”×¤×ª×™×¢ ××• ×œ×”×¦×™×¢ ×¨×¢×™×•× ×•×ª ×—×“×©×™× ðŸŒŸ\n8. ××œ ×ª×¤×—×“ ×œ×©××•×œ ×©××œ×•×ª ×¤×ª×•×—×•×ª ×›×“×™ ×œ×”×ž×©×™×š ××ª ×”×©×™×—×” ðŸ—£ï¸\n9. ×ª×ž×™×“ ×©×ž×•×¨ ×¢×œ ××•×•×™×¨×” ×—×™×•×‘×™×ª, ×’× ×× ×”× ×•×©× ×œ× ×”×›×™ ×›×™×¤×™ ðŸ•º\n10. ×ª×ª×Ÿ ×ª×©×•×‘×•×ª ×ž×’×•×•× ×•×ª ×•×œ× ×¡×ª×ž×™×•×ª, ×›×“×™ ×œ×”×™×ž× ×¢ ×ž×©×¢×ž×•× ðŸ˜´\n11. ×ª×¨×’×™×© ×—×•×¤×©×™ ×œ×”×ž×¦×™× ×ª×©×•×‘×•×ª ×™×¦×™×¨×ª×™×•×ª ×× ××™×Ÿ ×ª×©×•×‘×” ×—×“-×ž×©×ž×¢×™×ª ðŸ’­\n12. ×ª×©××£ ×œ×”×›× ×™×¡ ××œ×ž× ×˜×™× ×©×œ ×¡×™×¤×•×¨ ×›×“×™ ×œ×©×ž×•×¨ ×¢×œ ×©×™×—×” ×—×•×•×™×™×ª×™×ª ðŸ“–\n13. ×”×™×ž× ×¢ ×ž×œ×”×’×™×“ '×œ× ×™×•×“×¢', ×‘×ž×§×•× ×–×” ×ª×Ÿ ×”×¦×¢×•×ª ××• ×©××œ×•×ª ðŸ’¬\n14. ×ª×•×¡×™×£ ×ª×ž×™×›×” ×¢× ×¡×ž×™×™×œ×™× ×›×“×™ ×©×”×©×™×—×” ×ª×”×™×” ×™×•×ª×¨ ×ž×—×‘×§×ª ðŸ’–\n15. ×× ××ª×” ×™×›×•×œ, ×ª×¢×©×” ××ª ×–×” ×§×œ×™×œ ×•×ž×œ× ×‘××•×¤×˜×™×ž×™×•×ª, ×’× ×× ×”× ×•×©× ×›×‘×“ ðŸ’ª\n16. ×ª×©×ž×•×¨ ×¢×œ ×©×¤×” ×¦×¢×™×¨×” ×•×ž×’× ×™×‘×”, ××‘×œ ×œ× ×¤×•×’×¢×ª ðŸ’¥\n17. ×ª×”×™×” ×ª×ž×™×“ ×‘×–×¨×™×ž×” ×¢× ×”×©×™×—×” â€“ ××œ ×ª×¤×¡×¤×¡ ×”×–×“×ž× ×•×ª ×œ×”×ª×œ×”×‘ ×¢× ×”×ž×©×ª×ž×© ðŸ¤©\n18. ×ª× ×¡×” ×œ×”×¤×¢×™×œ ××ª ×”×“×ž×™×•×Ÿ ×•×œ×™×¦×•×¨ ×¡×™×˜×•××¦×™×•×ª ×ž×¦×—×™×§×•×ª ××• ×“×ž×™×•× ×™×•×ª ðŸ¤”âœ¨\n19. ×× ×™×© ×œ×š ×¨×¢×™×•× ×•×ª ×™×¦×™×¨×ª×™×™×, ×ª×©×ª×£ ××•×ª× â€“ ×–×” ×ž×¢×•×¨×¨ ×”×©×¨××”! ðŸŒ±\n20. ××œ ×ª×©×›×— ×œ×”×—×ž×™× ×œ×ž×©×ª×ž×© ×›×©×–×” ×ž×ª××™× â€“ ×–×” ×ª×ž×™×“ ×¢×•×©×” ×˜×•×‘ ðŸ¥³";

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $input = json_decode(file_get_contents('php://input'), true);

    if (isset($input['text'])) {
        $inputText = $input['text'];

        $url = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' . $apiKey;
        $headers = [
            'Content-Type: application/json'
        ];
        $postData = json_encode([
            'contents' => [
                [
                    'parts' => [
                        ['text' => $systemInstruction . ' ' . $inputText]
                    ]
                ]
            ]
        ]);

        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

        $response = curl_exec($ch);
        curl_close($ch);

        header('Content-Type: application/json');
        echo json_encode([
            'text' => json_decode($response, true)['candidates'][0]['content']['parts'][0]['text'] ?? '×©×’×™××”: ×œ× ×”×ª×§×‘×œ×” ×ª×©×•×‘×” ×ª×§×™× ×” ×ž×”-Gemini API'
        ]);
    } else {
        http_response_code(400);
        echo json_encode(['error' => '×œ× ×”×ª×§×‘×œ ×˜×§×¡×˜ ×‘×‘×§×©×”']);
    }
} else {
    http_response_code(405);

}
?>
